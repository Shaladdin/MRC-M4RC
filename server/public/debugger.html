<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>
</head>

<body>
    <textarea name="input" id="wsIn" cols="30" rows="10">
{
    "msg": "connectClient"
}
    </textarea>
    <button>send</button>
    <br>
    // request example:
    /*
    <br>
    {
        "msg":"identity",
        "device":"roboBin"
    }
    <br>
    {
        "type": "stream",
        "stream": "sensors",
        "data": {
            "metal": 20,
            "nonMetal": 4
        }
    }
    <br><br>
    {
        "msg": "connectClient"
    }
    <br>
    {
        "msg":"change mode",
        "mode": "sensorStream"
    }
    <br>
    {
        "msg":"security mode",
        "mode":true
    }
    <br><br>
    {
        "msg":"identity",
    "device":"smartHome"
    }
    <br>
    {
        "type": "stream",
        "stream": "sensors",
        "data": {
            "suhu": 27.79999924,
            "humidity": 37,
            "api":false,
            "orang":1,
            "gas": {
                "co": 0.004595334,
                "lpg": 0.008170504,
                "smoke": 0.009170504
            }
        }
    }
    <br><br>
    */
</body>
<script src="./js/ws.js"></script>
<script src="./js/common.js"></script>
<script>
    const input = document.getElementById('wsIn');
    const button = () => document.getElementsByTagName('button')[0];
    init((socket) => {
        function run() { socket.send(input.value); }
        removeAllEvents(button()).addEventListener("click", run);
    });
</script>

</html>